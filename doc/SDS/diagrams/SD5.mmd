sequenceDiagram
    actor User
    participant UI as PostDetailScreen
    participant CService as CommentService
    participant AIService as AIService
    participant DB as Supabase DB

    User->>UI: 댓글 프롬프트 입력 & "작성"
    
    %% 1. AI 생성 요청 (댓글은 생성 후 한번에 저장하는 흐름이 자연스러움)
    UI->>AIService: createAIContent(prompt)
    AIService-->>UI: Generated Comment Content

    %% 2. 댓글 저장
    UI->>CService: createComment(postId, userId, content, prompt)
    activate CService
    CService->>DB: INSERT INTO comments
    DB-->>CService: Comment Data (with Author Join)
    CService-->>UI: CommentWithAuthor Object
    deactivate CService

    UI->>UI: 댓글 목록에 새 댓글 추가