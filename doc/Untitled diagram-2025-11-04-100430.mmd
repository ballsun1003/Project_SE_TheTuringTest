classDiagram
  direction LR

  %% ====== Container (Data Only) ======
  class User {
    +id: string
    +email: string
    +nickname: string
    +role: string
    +isActive: boolean
    +createdAt: datetime
    +lastLoginAt: datetime
  }
  class Post {
    +id: string
    +title: string
    +content: string
    +authorId: string
    +modelName: string
    +likeCount: int
    +dislikeCount: int
    +viewCount: int
    +createdAt: datetime
    +updatedAt: datetime
    +isDeleted: boolean
  }
  class Comment {
    -comment_id: uuid 
    -postId: uuid
    -authorId: uuid
    -content: string
    +createdAt: datetime
    +updatedAt: datetime
  }
  class Evaluation {
    +id: string
    +postId: string
    +userId: string
    +type: string
    +createdAt: datetime
  }
  class Noti {
    +id: string
    +userId: string
    +title: string
    +body: string
    +isRead: boolean
    +createdAt: datetime
  }

  User "1" --> "many" Post : author
  User "1" --> "many" Comment
  User "1" --> "many" Evaluation
  User "1" --> "many" Noti
  Post "1" --> "many" Comment
  Post "1" --> "many" Evaluation

  %% ====== Components ======
  class SearchBox {
    +criteria: string
    +keyword: string
    +onSubmit(): void
  }
  class PostList {
    +items: Post[]
    +render(): void
  }
  class CAPTCHA {
    +siteKey: string
    +token: string
    +render(): void
    +verify(): boolean
  }

  %% ====== Screens ======
  class HomeScreen {
    +render(): void
  }
  class LoginScreen {
    +email: string
    +password: string
    +submit(): void
  }
  class SignUpScreen {
    +email: string
    +password: string
    +nickname: string
    +submit(): void
  }
  class BoardScreen {
    +render(): void
    +applyFilter(): void
  }
  class PostScreen {
    +postId: string
    +like(): void
    +dislike(): void
    +addComment(prompt: string): void
  }
  class PostCreateScreen {
    +title: string
    +prompt: string
    +submit(): void
  }
  class UserProfileScreen {
    +loadMyInfo(): void
    +updateProfile(): void
  }
  class NotiListScreen {
    +load(): void
    +markAsRead(notiId: string): void
  }

  %% ====== Services ======
  class AI {
    +generateText(prompt: string): string
    +editText(base: string, prompt: string): string
  }
  class DB {
    +select(resource: string, criteria: any): any
    +insert(resource: string, data: any): any
    +update(resource: string, id: string, patch: any): any
    +delete(resource: string, id: string): any
  }
  class AUTH {
    +signUp(email: string, password: string, nickname: string): any
    +signIn(email: string, password: string): any
    +signOut(): void
    +reAuth(): boolean
    +issueSession(): string
    +verifyCAPTCHA(token: string): boolean
    +verifyEmail(token: string): boolean
    +me(): User
    +updateProfile(patch: any): User
    +recordLoginAttempt(ip: string, ua: string, success: boolean): void
  }
  class PostService {
    +createFromPrompt(authorId: string, title: string, prompt: string): Post
    +editWithPrompt(postId: string, editorId: string, prompt: string): Post
    +delete(postId: string, requestorId: string): boolean
    +getById(id: string): Post
    +list(filter: any): Post[]
    +increaseView(postId: string): void
  }
  class CommentService {
    +createFromPrompt(postId: uuid, authorId: uuid, prompt: string): Comment
    +editWithPrompt(commentId: uuid, editorId: uuid, prompt: string): Comment
    +delete(commentId: uuid, requestorId: uuid): boolean
  }
  class EvalService {
    +evaluate(postId: string, userId: string, type: string): Post
    +getPopularPosts(criteria: any): Post[]
  }
  class SearchService {
    +searchPosts(criteria: any): Post[]
    +searchUsers(keyword: string): User[]
  }
  class NotiService {
    +send(toUserId: string, title: string, body: string): boolean
    +markAsRead(notiId: string): boolean
    +listForUser(userId: string): Noti[]
    +detectTriggers(event: string): void
    +deleteNoti(notiId: string): boolean
    +subscribe(userId: string): any
  }

  %% Dependencies (UI -> Services)
  LoginScreen ..> AUTH : signIn()
  SignUpScreen ..> AUTH : signUp(), verifyEmail()
  SignUpScreen ..> AUTH : verifyCAPTCHA()
  BoardScreen ..> SearchService : searchPosts()
  BoardScreen ..> PostService : list()
  HomeScreen ..> PostService : list()
  PostScreen ..> PostService : getById()
  PostScreen ..> EvalService : evaluate()
  PostScreen ..> CommentService : createFromPrompt()
  PostCreateScreen ..> PostService : createFromPrompt()
  PostCreateScreen ..> AI : generateText()
  UserProfileScreen ..> AUTH : me(), updateProfile()
  NotiListScreen ..> NotiService : listForUser(), markAsRead()
  SearchBox ..> SearchService : searchPosts()
  PostList ..> PostService : list()
  CAPTCHA ..> AUTH : verifyCAPTCHA()

  %% Service internals
  PostService ..> AI
  PostService ..> DB
  CommentService ..> AI
  CommentService ..> DB
  EvalService ..> DB
  SearchService ..> DB
  NotiService ..> DB
  AUTH ..> DB
  EvalService ..> NotiService : onLike/Dislike
  CommentService ..> NotiService : onReply

